function clearBoard(e){for(Grid.cells=[],Game.stats.generation=0,y=0;y<Game.board.rows;y++)for(x=0;x<Game.board.cols;x++)Grid.cells.push(Cell.create(x,y,0));e&&"function"==typeof e&&e()}function addShape(e,l){for(var t=e||[],a=Game.board.cols/2,r=Game.board.rows/2,n=0;n<t.length;n++)Cell.change(t[n][0]+a,t[n][1]+r,1);l&&"function"==typeof l&&l()}var Game={stats:{generation:0},rules:{},events:{dragging:!1,passedCellX:0,passedCellY:0},board:{cols:80,rows:50,cellW:10,cellH:10}},$canvas=$("#game"),$start=$("#start"),$stop=$("#stop"),$onestep=$("#onestep"),$gencounter=$("#gencounter"),$tumbler=$("#tumbler"),$glider=$("#glider"),$glidergun=$("#glidergun"),$ten=$("#ten"),canvas=document.getElementById("game");canvas.width=Game.board.cols*Game.board.cellW,canvas.height=Game.board.rows*Game.board.cellH;var ctx=canvas.getContext("2d");$start.on("click",function(){buttonHandler.Start()}),$stop.on("click",function(){buttonHandler.Stop()}),$onestep.on("click",function(){Grid.step(Grid.render)});var buttonHandler=function(){function e(){a=setInterval(t,150),$start.attr("disabled","disabled"),$start.addClass("selected"),$stop.removeAttr("disabled","disabled"),$stop.removeClass("selected")}function l(){clearInterval(a),$stop.attr("disabled","disabled"),$stop.addClass("selected"),$start.removeAttr("disabled","disabled"),$start.removeClass("selected")}function t(){Grid.step(Grid.render)}var a;return{Start:e,Stop:l}}(),Grid={cells:[],newGeneration:function(){var e=(Grid.cells,[]);return Grid.cells.forEach(function(l){var t=l.alive,a=Grid.neighboursAlive(l.x,l.y);t=1===l.alive&&2>a?0:1===l.alive&&a>3?0:0===l.alive&&3===a?1:l.alive,e.push(Cell.create(l.x,l.y,t))}),e},step:function(e){Game.stats.generation++,$gencounter.html(Game.stats.generation);var l=Grid.newGeneration();Grid.cells=l,e&&"function"==typeof e&&e()},findCell:function(e,l){e=(Game.board.cols+e)%Game.board.cols,l=(Game.board.rows+l)%Game.board.rows;var t=Grid.cells[Game.board.cols*l+e];return void 0!==t?t:void 0},neighboursAlive:function(e,l){var t=[Grid.findCell(e-1,l-1),Grid.findCell(e,l-1),Grid.findCell(e+1,l-1),Grid.findCell(e+1,l),Grid.findCell(e+1,l+1),Grid.findCell(e,l+1),Grid.findCell(e-1,l+1),Grid.findCell(e-1,l)],a=0;for(i=0;i<t.length;i++)void 0!==t[i]&&1===t[i].alive&&a++;return a},render:function(){var e=0;Grid.cells.forEach(function(l){e++,l.alive?ctx.fillStyle=Cell.styles.alive:ctx.fillStyle=Cell.styles.dead;var t=Math.floor(l.x)/10*100,a=Math.floor(l.y)/10*100;ctx.strokeStyle="#EEEEEE",ctx.fillRect(t,a,Game.board.cellW,Game.board.cellH),ctx.strokeRect(t,a,Game.board.cellW,Game.board.cellH)}),console.log(e+" cells rendered")},renderThese:function(){function e(){function e(){return Math.floor(256*Math.random()).toString(16)}return"#"+e()+e()+e()}var l=0;passedCellArray.forEach(function(t){l++,t.alive?ctx.fillStyle=e():ctx.fillStyle=Cell.styles.dead;var a=Math.floor(t.x)/10*100,r=Math.floor(t.y)/10*100;ctx.strokeStyle="#EEEEEE",ctx.fillRect(a,r,Game.board.cellW,Game.board.cellH),ctx.strokeRect(a,r,Game.board.cellW,Game.board.cellH)}),console.log(l+" these cells rendred")}},Cell={styles:{dead:"#F5F5F5",alive:"#263238"},create:function(e,l,t){var a=Object.create(this);return a.x=e,a.y=l,a.alive=t,a.nextState=void 0,a.neighbours=0,a},change:function(e,l,t){var a=Grid.findCell(e,l);0===t&&(a.alive=0),1===t&&(a.alive=1)},x:0,y:0,alive:0,possibleNeighbours:[[this.x-1,this.y-1],[this.x,this.y-1],[this.x+1,this.y-1],[this.x+1,this.y],[this.x+1,this.y+1],[this.x,this.y+1],[this.x-1,this.y+1],[this.x-1,this.y]]},passedCellArray=[];$canvas.mousedown(function(){Game.events.dragging=!0;var e=Math.floor((event.clientX+window.scrollX-canvas.offsetLeft)/10),l=Math.floor((event.clientY+window.scrollY-canvas.offsetTop)/10),t=Grid.findCell(e,l);Game.events.passedCellX=t.x,Game.events.passedCellY=t.y,t.alive?Cell.change(e,l,0):Cell.change(e,l,1),Grid.render()}).mouseup(function(){Game.events.dragging=!1}).mousemove(function(){if(Game.events.dragging!==!1){var e=Math.floor((event.clientX+window.scrollX-canvas.offsetLeft)/10),l=Math.floor((event.clientY+window.scrollY-canvas.offsetTop)/10),t=Grid.findCell(e,l);(t.x!==Game.events.passedCellX||t.y!==Game.events.passedCellY)&&(passedCellArray.push(t),t.alive?(Cell.change(e,l,0),Grid.renderThese()):(Cell.change(e,l,1),Grid.renderThese()),Game.events.passedCellX=t.x,Game.events.passedCellY=t.y,console.log(passedCellArray))}}),$(window).mouseup(function(){Game.events.dragging=!1,passedCellArray=[]}),canvas.addEventListener("contextmenu",function(e){e.preventDefault()});var Shapes={glider:[[2,1],[3,2],[3,3],[2,3],[1,3]],glidergun:[[24,0],[22,1],[24,1],[12,2],[13,2],[20,2],[21,2],[34,2],[35,2],[11,3],[15,3],[20,3],[21,3],[34,3],[35,3],[0,4],[1,4],[10,4],[16,4],[20,4],[21,4],[0,5],[1,5],[10,5],[14,5],[16,5],[17,5],[22,5],[24,5],[10,6],[16,6],[24,6],[11,7],[15,7],[12,8],[13,8]],tumbler:[[0,3],[0,4],[0,5],[1,0],[1,1],[1,5],[2,0],[2,1],[2,2],[2,3],[2,4],[4,0],[4,1],[4,2],[4,3],[4,4],[5,0],[5,1],[5,5],[6,3],[6,4],[6,5]],ten:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0],[9,0]]};$(".shapes button").on("click",function(){$(this).attr("disabled","disabled"),$(this).siblings().removeAttr("disabled","disabled"),$(this).addClass("selected"),$(this).siblings().removeClass("selected"),clearBoard()}),$glider.on("click",function(){addShape(Shapes.glider,Grid.render)}),$tumbler.on("click",function(){addShape(Shapes.tumbler,Grid.render)}),$ten.on("click",function(){addShape(Shapes.ten,Grid.render)}),$glidergun.on("click",function(){addShape(Shapes.glidergun,Grid.render)}),function(){clearBoard(),addShape(Shapes.glidergun,Grid.render),$glidergun.attr("disabled","disabled"),$glidergun.addClass("selected"),buttonHandler.Stop()}();
//# sourceMappingURL=main.js.map
